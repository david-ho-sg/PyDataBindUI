precision mediump float;

uniform sampler2D CC_Texture0;
uniform float u_threshold;

varying vec2 v_texCoord;

void main(void)
{
	vec4 color = texture2D(CC_Texture0, v_texCoord);
    float luminance = dot(color.xyz * color.a, vec3( 0.299, 0.587, 0.114 ));
	float visible = float(luminance > u_threshold);
    gl_FragColor = color * visible;
}
